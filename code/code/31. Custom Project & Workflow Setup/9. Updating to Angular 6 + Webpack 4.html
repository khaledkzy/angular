<p><strong>Important - Read before proceeding!</strong></p>

<p>With the latest update to Angular 6 as well as Webpack now being updated to version 4, some adjustments to the development and production workflows are required to make everything work again. Make sure to implement the following steps <strong>AFTER going through the next lectures </strong>(i.e. <strong>come back to this lecture to update the code</strong> - only some adjustments are required, no worries). Running the workflow as we set it up there will break, but no worries only very few steps are required.</p>















































<p>0a) Make sure you're using Webpack version 4: <code>npm install --save-dev webpack@4</code> </p>



























<p>0b) You also need the webpack-cli package then: <code>npm install --save-dev webpack-cli</code> </p>































<p>1) Install one extra dev-dependency: <code>@ngtools/webpack</code> </p>















































<p><code>npm install --save-dev @ngtools/webpack</code> </p>















































<p>2) Remove <code>outDir</code>  from <code>tsconfig.aot.json</code> </p>















































<p>3) Update webpack.config.prod.js</p>















































<p>Add one import at the top (e.g. right after importing <code>webpack.config.common</code> ):</p>















































<pre class="prettyprint linenums">var ngw = require('@ngtools/webpack');</pre>































































































<p>Add one extra rule (right before the old rule we had there - don't delete the old rule!):<br></p>















































<pre class="prettyprint linenums">{
  test: /(?:\.ngfactory\.js|\.ngstyle\.js|\.ts)$/,
  loader: '@ngtools/webpack'
},</pre>































































































<p>Add one extra plugin (right before the old plugin we had there - don't delete that old plugin!):</p>















































<pre class="prettyprint linenums">new ngw.AngularCompilerPlugin({
  tsConfigPath: './tsconfig.aot.json',
  entryModule: './src/app/app.module#AppModule'
}),</pre>































































































<p>4) Update the <code>build:prod</code>  script to look like this (only the cleanup part - del-cli - changed a bit):</p>





































<pre class="prettyprint linenums">"build:prod": "del-cli dist &amp;&amp; ngc -p tsconfig.aot.json &amp;&amp; ngc -p tsconfig.aot.json &amp;&amp; webpack --config webpack.config.prod.js --progress --profile --bail &amp;&amp; del-cli 'src/app/**/*.js' 'src/app/**/*.ngfactory.ts' 'src/app/**/*.js.map' 'src/app/**/*.shim.ts' 'src/app/**/*.ngsummary.json' 'src/app/**/*.ngstyle.ts' 'dist/app' 'src/polyfills.ngsummary.json'",</pre>











































































<p>5) Add <code>mode: 'development'</code>  to your <code>webpack.config.dev.js</code>  file (e.g. right after the <code>output</code>  property):</p>

























<pre class="prettyprint linenums">output: {
    ...
},
mode: 'development',</pre>



















































<p>6) Add <code>mode: 'production'</code>  to <code>webpack.config.prod.js</code>  file</p>















<p>7) Remove the </p>















<p><code>new webpack.optimize.UglifyJsPlugin()</code> </p>















<p>line in <code>plugins[]</code>  in <code>webpack.config.prod.js</code> . This is not required anymore since <code>mode: 'production'</code>  will automatically optimize and minify your code.</p>

























<p>With these steps, <code>npm run build:prod</code>  and <code>npm run build</code>  should work fine.</p>